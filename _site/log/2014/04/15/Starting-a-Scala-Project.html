<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Starting a Scala Project</title>
  <meta name="description" content="When starting a new Scala project there are a few things that you wantdo get setup correctly before starting your development work. These aresome of the thin...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.johnmurray.io/log/2014/04/15/Starting-a-Scala-Project.html">
  <link rel="alternate" type="application/rss+xml" title="John Murray" href="http://www.johnmurray.io/feed.xml" />
</head>


  <body>

    <header class="masthead">
  <div class="masthead-inner">
    <a href="/"><h1>murray</h2></a>
    <p class="sub">
      <a href="http://github.com/johnmurray">github</a>
      |
      <a href="http://twitter.com/johnmurray_io">twitter</a>
      |
      <a href="http://linkedin.com/pub/john-murray/22/a86/80a/en">linkedin</a>
    </p>
    <p class="sub">&copy; 2016. All Rights Reserved</p>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

    <header class="post-header">
        <h1 class="post-title">Starting a Scala Project</h1>
    </header>

    <article class="post-content">
        <p>When starting a new Scala project there are a few things that you want
do get setup correctly before starting your development work. These are
some of the things that I do for each new project.</p>

<blockquote>
  <p><strong>Spoiler</strong> - I have created a GitHub repo <a href="https://github.com/JohnMurray/basic-scala-template">basic-scala-template</a> that 
contains everything that is mentioned here.</p>
</blockquote>

<blockquote>
  <p><strong>Note</strong> - Based on feedback, I have listed updates to the template
at the bottom of this post.</p>
</blockquote>

<h2 id="a-note-on-activator">A Note on Activator</h2>

<p>The wonderful people at Typesafe have a project called <a href="http://www.typesafe.com/activator">Activator</a> which
is a nice little tool that, among other things, allows you to get started quickly
by selecting a base template. While this is useful and there are some good
templates, I still prefer to manage my own template. This allows me to make some
additions that are missing from the Activator templates and setup my projects
in a way that work best for me.</p>

<h2 id="sbt">SBT</h2>

<p>I setup all my projects as a standard SBT project (because why wouldn’t you)
so hopefully you can find this useful. The first thing I do is download the
version of SBT that I want and add the launcher and the shell script local
to my git repo. This way I always have sbt available on whatever machine
that I am working on and I am able to make per-project changes to the
launcher. If you do this as well you will have to get used to typing <code>./sbt</code> 
vs <code>sbt</code>, but that is an easy change to make.</p>

<p>As of right now, my project structure looks like the following:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span class="lineno">1</span> .
<span class="lineno">2</span> ├── bin
<span class="lineno">3</span> │   └── sbt-launch.jar
<span class="lineno">4</span> └── sbt</code></pre></div>

<p>I will note that for the actual <code>sbt</code> script I usually just use one of
my own rather than the super-complex ones that ship with the SBT download. My
current sbt launch script looks like:</p>

<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="lineno">1</span> <span class="o">#!/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
<span class="lineno">2</span>  
<span class="lineno">3</span> <span class="nc">JAVA</span><span class="k">=</span><span class="n">java</span>
<span class="lineno">4</span> <span class="nc">JAVA_OPTS</span><span class="o">=</span><span class="s">&quot;-Xmx512m -XX:MaxPermSize=256M&quot;</span>
<span class="lineno">5</span> <span class="nc">DIR</span><span class="o">=</span><span class="s">&quot;$( cd &quot;</span><span class="n">$</span><span class="o">(</span> <span class="n">dirname</span> <span class="s">&quot;${BASH_SOURCE[0]}&quot;</span> <span class="o">)</span><span class="s">&quot; &amp;&amp; pwd )&quot;</span>
<span class="lineno">6</span>  
<span class="lineno">7</span> <span class="nc">$JAVA</span> <span class="nc">$JAVA_OPTS</span> <span class="o">-</span><span class="n">jar</span> <span class="s">&quot;${DIR}/bin/sbt-launch.jar&quot;</span></code></pre></div>

<h2 id="basic-sbt-additions">Basic SBT Additions</h2>

<p>Now that I have SBT setup for a project, I can start doing some basic
configurations that I figure I will need on all my projects. First I’m going
to add is the <a href="https://github.com/spray/sbt-revolver">sbt-revolver</a>. This is a very useful plugin that can run
your project in a forked JVM and reload it on a change. We can add this to
the project by adding the following to our <code>project/plugin.sbt</code>:</p>

<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="lineno">1</span> <span class="n">addSbtPlugin</span><span class="o">(</span><span class="s">&quot;io.spray&quot;</span> <span class="o">%</span> <span class="s">&quot;sbt-revolver&quot;</span> <span class="o">%</span> <span class="s">&quot;0.7.2&quot;</span><span class="o">)</span></code></pre></div>

<p>While I’m at it, I’m going to add one more plugin, <a href="https://github.com/mpeltonen/sbt-idea">sbt-idea</a>, that can 
generate IDE-specific files for IntelliJ IDE with a simple command <code>gen-idea</code>:</p>

<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="lineno">1</span> <span class="n">addSbtPlugin</span><span class="o">(</span><span class="s">&quot;com.github.mpeltonen&quot;</span> <span class="o">%</span> <span class="s">&quot;sbt-idea&quot;</span> <span class="o">%</span> <span class="s">&quot;1.6.0&quot;</span><span class="o">)</span></code></pre></div>

<h2 id="template-build-file">Template Build File</h2>

<p>When using SBT I opt for the full <code>Build.scala</code> vs the DSL-like <code>build.sbt</code> file.
I find it easier and more straight-forward to work with. I like to break my
build file into several logical sections: resolvers, dependencies, build settings,
and the application build. My typical build-file looks like:</p>

<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="lineno"> 1</span> <span class="k">import</span> <span class="nn">sbt._</span>
<span class="lineno"> 2</span> <span class="k">import</span> <span class="nn">Keys._</span>
<span class="lineno"> 3</span> <span class="k">import</span> <span class="nn">spray.revolver.RevolverPlugin._</span>
<span class="lineno"> 4</span>  
<span class="lineno"> 5</span> <span class="k">object</span> <span class="nc">Resolvers</span> <span class="o">{</span>
<span class="lineno"> 6</span> <span class="o">}</span>
<span class="lineno"> 7</span>  
<span class="lineno"> 8</span> <span class="k">object</span> <span class="nc">Dependencies</span> <span class="o">{</span>
<span class="lineno"> 9</span>    <span class="k">val</span> <span class="n">appDependencies</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span>
<span class="lineno">10</span>    <span class="o">)</span>
<span class="lineno">11</span> <span class="o">}</span>
<span class="lineno">12</span>  
<span class="lineno">13</span> <span class="k">object</span> <span class="nc">BuildSettings</span> <span class="o">{</span>
<span class="lineno">14</span>  
<span class="lineno">15</span>    <span class="k">val</span> <span class="n">buildOrganization</span> <span class="k">=</span> <span class="s">&quot;johnmurray.io&quot;</span>
<span class="lineno">16</span>    <span class="k">val</span> <span class="n">appName</span> <span class="k">=</span> <span class="s">&quot;CHANGE_ME&quot;</span>
<span class="lineno">17</span>    <span class="k">val</span> <span class="n">buildVersion</span> <span class="k">=</span> <span class="s">&quot;0.0.1-SNAPSHOT&quot;</span>
<span class="lineno">18</span>    <span class="k">val</span> <span class="n">buildScalaVersion</span> <span class="k">=</span> <span class="s">&quot;2.10.4&quot;</span>
<span class="lineno">19</span>    <span class="k">val</span> <span class="n">buildScalaOptions</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="s">&quot;-unchecked&quot;</span><span class="o">,</span> <span class="s">&quot;-deprecation&quot;</span><span class="o">,</span> <span class="s">&quot;-encoding&quot;</span><span class="o">,</span> <span class="s">&quot;utf8&quot;</span><span class="o">)</span>
<span class="lineno">20</span>  
<span class="lineno">21</span>    <span class="k">import</span> <span class="nn">Resolvers._</span>
<span class="lineno">22</span>    <span class="k">import</span> <span class="nn">Dependencies._</span>
<span class="lineno">23</span>  
<span class="lineno">24</span>    <span class="k">val</span> <span class="n">buildSettings</span> <span class="k">=</span> <span class="nc">Defaults</span><span class="o">.</span><span class="n">defaultSettings</span> <span class="o">++</span> <span class="nc">Seq</span><span class="o">(</span>
<span class="lineno">25</span>       <span class="n">organization</span>        <span class="o">:=</span> <span class="n">buildOrganization</span><span class="o">,</span>
<span class="lineno">26</span>       <span class="n">version</span>             <span class="o">:=</span> <span class="n">buildVersion</span><span class="o">,</span>
<span class="lineno">27</span>       <span class="n">scalaVersion</span>        <span class="o">:=</span> <span class="n">buildScalaVersion</span><span class="o">,</span>
<span class="lineno">28</span>       <span class="n">libraryDependencies</span> <span class="o">:=</span> <span class="n">appDependencies</span><span class="o">,</span>
<span class="lineno">29</span>       <span class="n">scalacOptions</span>       <span class="o">:=</span> <span class="n">buildScalaOptions</span>
<span class="lineno">30</span>    <span class="o">)</span> <span class="o">++</span> <span class="nc">Revolver</span><span class="o">.</span><span class="n">settings</span>
<span class="lineno">31</span> <span class="o">}</span>
<span class="lineno">32</span>  
<span class="lineno">33</span> <span class="k">object</span> <span class="nc">ApplicationBuild</span> <span class="k">extends</span> <span class="nc">Build</span> <span class="o">{</span>
<span class="lineno">34</span>  
<span class="lineno">35</span>    <span class="k">import</span> <span class="nn">BuildSettings._</span>
<span class="lineno">36</span>  
<span class="lineno">37</span>    <span class="k">lazy</span> <span class="k">val</span> <span class="n">main</span> <span class="k">=</span> <span class="nc">Project</span><span class="o">(</span>
<span class="lineno">38</span>       <span class="n">appName</span><span class="o">,</span>
<span class="lineno">39</span>       <span class="n">file</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">),</span>
<span class="lineno">40</span>       <span class="n">settings</span> <span class="k">=</span> <span class="n">buildSettings</span><span class="o">)</span>
<span class="lineno">41</span> <span class="o">}</span></code></pre></div>

<p>Even though this build file is pretty bare (<em>at the moment</em>) there are some key
things that I like to include as part of every build configuration.</p>

<dl>
  <dt>Scala</dt>
  <dd>
    Aside from specifying the version that I will be using for this project, I
    also specify some basic compiler options to output more verbose warnings and
    do some extra checks for me.
  </dd>

  <dt>Versioning</dt>
  <dd>
    I like to start each project as a snapshot version (0.0.1). I can then extend
    the build-file later with some publishing configurations to push snapshot versions
    to a repo (like Sonatype) on each successful build/commit/test-run/etc.
  </dd>

  <dt>Revolver</dt>
  <dd>
    Even though we added the <code>sbt-revolver</code> plugin to our 
    <code>plugins.sbt</code> file earlier we still need to add the settings to 
    our build to fully install it.
  </dd>
</dl>

<h2 id="style-checking">Style Checking</h2>

<p>For me, this is a new addition but I generally like consistency in my projects (open
source and closed) when it comes to style. I’ve been playing around with various
style checkers, but I’ve settled on <a href="http://www.scalastyle.org/">Scalastyle</a> for now. I don’t have much beyond
the standard, but I’m sure it’ll evolve over time. I added the following to my
<code>plugins.sbt</code> file</p>

<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="lineno">1</span> <span class="n">addSbtPlugin</span><span class="o">(</span><span class="s">&quot;org.scalastyle&quot;</span> <span class="o">%%</span> <span class="s">&quot;scalastyle-sbt-plugin&quot;</span> <span class="o">%</span> <span class="s">&quot;0.4.0&quot;</span><span class="o">)</span>
<span class="lineno">2</span>  
<span class="lineno">3</span> <span class="n">resolvers</span> <span class="o">+=</span> <span class="s">&quot;sonatype-releases&quot;</span> <span class="n">at</span> <span class="s">&quot;https://oss.sonatype.org/content/repositories/releases/&quot;</span></code></pre></div>

<p>I’ve also updated our <code>buildSettings</code> in <code>project/Build.scala</code> by appending the
Scalastyle settings</p>

<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="lineno">1</span> <span class="k">val</span> <span class="n">buildSettings</span> <span class="k">=</span> <span class="nc">Defaults</span><span class="o">.</span><span class="n">defaultSettings</span> <span class="o">++</span> <span class="nc">Seq</span><span class="o">(</span>
<span class="lineno">2</span>   <span class="n">organization</span>        <span class="o">:=</span> <span class="n">buildOrganization</span><span class="o">,</span>
<span class="lineno">3</span>   <span class="n">version</span>             <span class="o">:=</span> <span class="n">buildVersion</span><span class="o">,</span>
<span class="lineno">4</span>   <span class="n">scalaVersion</span>        <span class="o">:=</span> <span class="n">buildScalaVersion</span><span class="o">,</span>
<span class="lineno">5</span>   <span class="n">libraryDependencies</span> <span class="o">:=</span> <span class="n">appDependencies</span><span class="o">,</span>
<span class="lineno">6</span>   <span class="n">scalacOptions</span>       <span class="o">:=</span> <span class="n">buildScalaOptions</span>
<span class="lineno">7</span> <span class="o">)</span> <span class="o">++</span> <span class="nc">Revolver</span><span class="o">.</span><span class="n">settings</span> <span class="o">++</span> <span class="nc">ScalastylePlugin</span><span class="o">.</span><span class="nc">Settings</span></code></pre></div>

<p>As far as the build configuration goes, my configuration isn’t far off the default you
get by running <code>sbt scalastyle-generate-config</code> so I won’t list it here.</p>

<h2 id="testing">Testing</h2>

<p>For testing I typically start with Specs2 and add from there. For this we add to the build
file simply:</p>

<div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="lineno">1</span> <span class="k">object</span> <span class="nc">Dependencies</span> <span class="o">{</span>
<span class="lineno">2</span>    <span class="k">val</span> <span class="n">appDependencies</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span>
<span class="lineno">3</span>       <span class="s">&quot;org.specs2&quot;</span> <span class="o">%%</span> <span class="s">&quot;specs2&quot;</span> <span class="o">%</span> <span class="s">&quot;2.3.10&quot;</span> <span class="o">%</span> <span class="s">&quot;test&quot;</span>
<span class="lineno">4</span>    <span class="o">)</span>
<span class="lineno">5</span> <span class="o">}</span></code></pre></div>

<p>I can easily add others in the same fashion. For example, if I were doing an Akka
project I would add the <code>akka-testkit</code> for the <code>spray-teskit</code> for Spray projects.</p>

<p>If the project I am building is open source, I have to think about CI what build
system I’m going to use. I personally prefer to use <a href="http://travis-ci.org">Travis-CI</a> just because
it’s so darn simple. Since this is usually the case I add the <code>.travis.yml</code> file:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="lineno"> 1</span> <span class="l-Scalar-Plain">language</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">scala</span>
<span class="lineno"> 2</span> <span class="l-Scalar-Plain">scala</span><span class="p-Indicator">:</span>
<span class="lineno"> 3</span>   <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">2.10.3</span>
<span class="lineno"> 4</span> <span class="l-Scalar-Plain">script</span><span class="p-Indicator">:</span>
<span class="lineno"> 5</span>   <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sbt compile test:compile</span>
<span class="lineno"> 6</span>   <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sbt scalastyle</span>
<span class="lineno"> 7</span>   <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sbt test</span>
<span class="lineno"> 8</span> <span class="l-Scalar-Plain">jdk</span><span class="p-Indicator">:</span>
<span class="lineno"> 9</span>   <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">oraclejdk7</span>
<span class="lineno">10</span>   <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">openjdk7</span>
<span class="lineno">11</span>   <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">oraclejdk8:w</span></code></pre></div>

<h2 id="miscellaneous">Miscellaneous</h2>

<p>As a final note, I like to add some basic files that I put in most projects:</p>

<dl>
  <dt><code>.gitignore</code></dt>
  <dd>
    The baiscs for scala projects as well as IntelliJ project-files and general
    files (like <code>.swp</code> files and what not)
  </dd>

  <dt><code>readme.md</code></dt>
  <dd>
    I like to include a readme with all of my projects (open source or not) just
    as a <em>welcome</em> and a guide for navigating and working with the project.
  </dd>
</dl>

<h2 id="done">Done!</h2>

<p>Now that I’m done putting together all the pieces to get started, my final directory
structure is laid out in the following manner:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text"><span class="lineno"> 1</span> .
<span class="lineno"> 2</span> ├── .gitignore
<span class="lineno"> 3</span> ├── .travis.yml
<span class="lineno"> 4</span> ├── bin
<span class="lineno"> 5</span> │   └── sbt-launch.jar
<span class="lineno"> 6</span> ├── project
<span class="lineno"> 7</span> │   ├── Build.scala
<span class="lineno"> 8</span> │   └── plugins.sbt
<span class="lineno"> 9</span> ├── readme.md
<span class="lineno">10</span> ├── sbt
<span class="lineno">11</span> └── scalastyle-config.xml</code></pre></div>

<p>As I mentioned in the spoiler up top, I have put this into a git repository for my
own (and possibly your) convenience <a href="https://github.com/JohnMurray/basic-scala-template">here</a>. You can start any new project using 
this template simply via:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="lineno">1</span> git clone https://github.com/JohnMurray/basic-scala-template.git YOUR_PROJECT_NAME</code></pre></div>

<p>Or, you can clone the repository and add the <code>scala-new</code> script to your path which is
located in the root of the project. With this you can simply do</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="lineno">1</span> scala-new my-new-project
<span class="lineno">2</span> <span class="nb">cd </span>my-new-project
<span class="lineno">3</span> <span class="c"># start working!</span></code></pre></div>

<p>This script will take care of updating the repo, creating a directory, and copying
over all the necessary files. Easy peasy.</p>

<p>If you find this useful (and I hope you do) then please fork <a href="https://github.com/JohnMurray/basic-scala-template">my repo</a> and customize
it to suite your needs. Feel free to send pull requests if you think I am missing
something awesome that you feel every Scala project should include.</p>

<p><strong>Enjoy!</strong></p>

<p><br /><br /></p>

<h2 id="update-1">Update #1</h2>

<p>Thanks to a comment by <a href="http://www.reddit.com/user/predef">predef</a> on reddit, I have removed the sbt-launcher jar from
my project along with my custom sbt script in favor of using the <a href="https://github.com/paulp/sbt-extras">sbt-extra</a> script
and creating a <code>project/build.properties</code> file. You now must simply use the sbt script
<code>./sbt</code> and the correct version of SBT will be downloaded for you.</p>

<p>The second suggestion was to remove the <code>sbt-idea</code> plugin from the project and move it
into my global plugins (that’s a thing?!) which is a fantastic idea. So I have now created
the file <code>~/.sbt/0.13/plugins/intellij.sbt</code> that contains the <code>addPlugin...</code> that we used
earlier in the <code>plugins.sbt</code> file for the <code>sbt-idea</code> plugin. Now the project can be more
agnostic to what editor is used. Do note that if you still want to use the IntelliJ SBT
plugin that you’ll need to add that to your global plugins as the script/template will not
handle that for you.</p>



        <div class="footer-navigation">
            
                <span class="previous"><a href="/log/2013/11/17/Scala-map()-vs-map%7B%7D.html">
                    &laquo;Scala map() vs map{}
                </a></span>
            
            
                <span class="next"><a href="/log/2015/04/27/Jenkins-Env-Templating.html">
                    Jenkins EnvVar Templating&raquo;
                </a></span>
            
        </div>

        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Footer Advertisement -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-8460014050417630"
             data-ad-slot="9924998708"
             data-ad-format="auto"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

    </article>

</div>

      </div>
    </div>


    <!-- Google Analytics -->
    <script type="application/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-11511983-4']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); 
        ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>

</html>
