<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Inspecting JSON From The Command Line</title>
  <meta name="description" content="Sometimes you need to inspect some heterogeneous JSON documents. When it comes to working with JSONthere are a lot of great libraries out there. However, the...">

  <!-- <link rel="stylesheet" href="/css/main.css"> -->
  
  <style>
    @import "https://fonts.googleapis.com/css?family=Roboto:300,400,500";body,h1,h2,h3,h4,h5,h6,p,blockquote,pre,hr,dl,dd,ol,ul,figure{margin:0;padding:0}body{-webkit-text-size-adjust:100%;background-color:#fff;color:#566b78;font-family:"Roboto","Open Sans",Helvetica,Arial,sans-serif;font-size:18px;font-weight:300;line-height:1.5;padding-top:2em}h1,h2,strong{color:#344b78}h1,h2,h3,h4,h5,h6,p,blockquote,pre,ul,ol,dl,figure{margin-bottom:15px}img{max-width:100%;vertical-align:middle}figure>img{display:block}figcaption{font-size:15.75px}ul,ol{margin-left:30px}li>ul,li>ol{margin-bottom:0}h1,h2,h3,h4,h5,h6{font-weight:300}a{color:#e81c4f;text-decoration:none}a:visited{color:#e81c4f}a:hover{color:#566b78;text-decoration:none}blockquote{color:#828282;border-left:4px solid #e8e8e8;padding-left:15px;font-size:18px;letter-spacing:-1px;font-style:italic}blockquote>:last-child{margin-bottom:0}pre,code{font-size:12px;border-radius:3px;border:1px solid #d8dee9;background-color:#f5f7f9}code{padding:4px 5px 1px 5px}pre{padding:8px 12px;overflow-x:auto}pre>code{border:0;padding-right:0;padding-left:0}.wrapper{max-width:-webkit-calc(800px - (30px * 2));max-width:calc(800px - (30px * 2));margin-right:auto;margin-left:auto;padding-right:30px;padding-left:30px}@media screen and (max-width: 800px){.wrapper{max-width:-webkit-calc(800px - (30px));max-width:calc(800px - (30px));padding-right:15px;padding-left:15px}}.wrapper:after{content:"";display:table;clear:both}.icon>svg{display:inline-block;width:16px;height:16px;vertical-align:middle}.icon>svg path{fill:#828282}.masthead{color:#fff;background-color:#2a2a2a;min-width:270px}.masthead h1{color:#fff;font-weight:bold;font-family:"Lucida Console", Monaco, monospace}.masthead a{text-decoration:none}.masthead a:hover{text-decoration:none}.masthead a:active{text-decoration:none}.masthead-inner .sub{color:#666}.masthead-inner .sub a{color:#666}.masthead-inner .sub a:hover{color:#999}@media (min-width: 760px){.masthead-inner{padding:40px}.page-content{margin-left:40px;margin-right:40px}}@media (min-width: 990px){.masthead{position:fixed;top:0;left:0;bottom:0;width:25%;margin-bottom:0}.masthead-inner{position:absolute;top:0;right:0;left:0}.masthead h1{font-size:54px}.page-content{margin-left:35%;margin-right:10%;width:55%}}.page-content{padding:30px 0}.page-heading{font-size:20px}.post-list{margin-left:0;list-style:none}.post-list .post-title{margin-top:30px;margin-bottom:0;display:inline-block}.post-meta{color:#828282;display:inline-block;float:right;font-size:15.75px;margin-top:32px}.post-link{display:block;font-size:24px}.post-header{margin-bottom:30px}.post-title{font-size:42px;letter-spacing:-1px;line-height:1}@media screen and (max-width: 800px){.post-title{font-size:36px}}.post-content{margin-bottom:30px}.post-content h2{font-size:32px}@media screen and (max-width: 800px){.post-content h2{font-size:28px}}.post-content h3{font-size:26px}@media screen and (max-width: 800px){.post-content h3{font-size:22px}}.post-content h4{font-size:20px}@media screen and (max-width: 800px){.post-content h4{font-size:18px}}.footer-navigation{border-bottom:1px solid #e0e0e0;display:block;font-weight:bold;height:60px;margin:50px 0 40px 0;text-align:center}.footer-navigation .previous{display:block;margin:0 auto}.footer-navigation .next{display:block;margin:0 auto}@media (min-width: 760px){.footer-navigation{height:30px;padding-bottom:10px}.footer-navigation .previous{display:block;float:left;margin:0;text-align:left}.footer-navigation .next{display:block;float:right;margin:0;text-align:right}}.highlight{background:#ffffff}.highlight .c{color:#999988;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:#999988;font-style:italic}.highlight .cp{color:#999999;font-weight:bold}.highlight .c1{color:#999988;font-style:italic}.highlight .cs{color:#999999;font-weight:bold;font-style:italic}.highlight .gd{color:#000000;background-color:#fdd}.highlight .gd .x{color:#000000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000000;background-color:#dfd}.highlight .gi .x{color:#000000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{color:#445588;font-weight:bold}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:teal}.highlight .nb{color:#0086B3}.highlight .nc{color:#445588;font-weight:bold}.highlight .no{color:#0086b3}.highlight .ni{color:purple}.highlight .ne{color:#990000;font-weight:bold}.highlight .nf{color:#990000;font-weight:bold}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .nv{color:teal}.highlight .ow{font-weight:bold}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#0086b3}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#0086b3}.highlight .bp{color:#999}.highlight .vc{color:teal}.highlight .vg{color:teal}.highlight .vi{color:teal}.highlight .il{color:#099}.post .highlight .lineno{color:#ccc;display:inline-block;padding:0 5px 0 0;border-right:1px solid #ccc}.post .highlight pre code{display:block;white-space:pre;overflow-x:auto;word-wrap:normal}.post .highlight pre{border:none;border-left:3px solid #d8dee9;border-color:#e0e0e0}.post .highlight pre code{background-color:transparent;font-size:12px}

  </style>
  <link rel="canonical" href="http://www.johnmurray.io/log/2016/07/25/Inspecting-JSON-From-The-Command-Line.html">
  <link rel="alternate" type="application/rss+xml" title="John Murray" href="http://www.johnmurray.io/feed.xml" />
</head>


  <body>

    <header class="masthead">
  <div class="masthead-inner">
    <a href="/"><h1>murray</h2></a>
    <p class="sub">
      <a href="http://github.com/johnmurray">github</a>
      |
      <a href="http://twitter.com/johnmurray_io">twitter</a>
      |
      <a href="http://linkedin.com/pub/john-murray/22/a86/80a/en">linkedin</a>
    </p>
    <p class="sub">&copy; 2016. All Rights Reserved</p>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

    <header class="post-header">
        <h1 class="post-title">Inspecting JSON From The Command Line</h1>
    </header>

    <article class="post-content">
        <p>Sometimes you need to inspect some heterogeneous JSON documents. When it comes to working with JSON
there are a lot of great libraries out there. However, there aren’t many tools out there that
allow me to work with JSON in the shell without resorting to writing small custom bits of Python
or Ruby each time. And even this doesn’t always get me as far as I’d like it to without writing
larger blocks of Ruby/Python code to dig through large / complex JSON documents.</p>

<p>Given the title of this post, you can see where this is heading. I have created a simple command
line utility as a gathering place of functionality for inspecting JSON documents. I’ll show off
some features of the tool.</p>

<p>If you want to follow-along with the examples I’m showing, feel free to install the tool from
<a href="https://pypi.python.org/pypi/json-inspect">PyPi</a> via</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">pip install json-inspect</code></pre></div>

<p>Let’s first make a file <code>test.json</code> to contain some fake JSON data to play with</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">[</span>
 <span class="p">{</span>
   <span class="nt">&quot;facebook&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="nt">&quot;demographic&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;regions&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;US&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Kentucky&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Louisville&quot;</span><span class="p">}</span> <span class="p">]</span>
       <span class="p">}</span>
     <span class="p">}</span>
   <span class="p">},</span>
   <span class="nt">&quot;google&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="nt">&quot;demographic&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;regions&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;US&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Kentucky&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Highland Heights&quot;</span><span class="p">}</span> <span class="p">]</span>
       <span class="p">}</span>
     <span class="p">}</span>
   <span class="p">}</span>
 <span class="p">},</span>
 <span class="p">{</span>
   <span class="nt">&quot;twitter&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="nt">&quot;demographic&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;regions&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;UK&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Wales&quot;</span><span class="p">}</span> <span class="p">]</span>
       <span class="p">}</span>
     <span class="p">}</span>
   <span class="p">}</span>
 <span class="p">}</span>
<span class="p">]</span></code></pre></div>

<h2 id="frequency">Frequency</h2>

<p>If you are working with JSON data that you do not control (think data integrations)
then you sometimes need to compare their specification of the data with the data
you are actually receiving. For this we can create a histogram of values based on a
search expression.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>cat test.json <span class="p">|</span> json-inspect histo <span class="s1">&#39;[].*.user.demographic.regions.[].name&#39;</span>

<span class="o">[]</span>.*.user.demographic.regions.<span class="o">[]</span>.name:
Highland Heig   <span class="p">|</span> <span class="c">#########################                          | (1)</span>
US              <span class="p">|</span> <span class="c">################################################## | (2)</span>
Louisville      <span class="p">|</span> <span class="c">#########################                          | (1)</span>
Kentucky        <span class="p">|</span> <span class="c">################################################## | (2)</span>
UK              <span class="p">|</span> <span class="c">#########################                          | (1)</span>
Wales           <span class="p">|</span> <span class="c">#########################                          | (1)</span></code></pre></div>

<p>Maybe I’m biased, but this is great! I was able to inspect this JSON document with
minimal command-line-foo.</p>

<h2 id="search-paths--expressions">Search Paths / Expressions</h2>

<p>The heart of the previous example is the search expression. It currently consists of
three parts (working on a recursive <code>**</code> operator) which are</p>

<ul>
  <li><code>[]</code> - Represents an array (containing objects)</li>
  <li><code>*</code> - Represents all fields within an array</li>
  <li><code>TOKEN</code> - This is a field name within an object</li>
</ul>

<p>The <code>[]</code> and <code>*</code> tokens will result in all values being processed by the next token
in the path. The path itself is delimited by <code>.</code>, so this means that field-names
with <code>.</code> in them are not supported.</p>

<h2 id="values">Values</h2>

<p>And if instead of creating charts based on values we instead wanted to extract
those values, we can do that as well. An example</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>cat test.json <span class="p">|</span> json-inspect ext <span class="s2">&quot;[].*.user.demographic.regions.[].*&quot;</span>
Louisville,Kentucky,US,Highland Heights,Kentucky,US,Wales,UK</code></pre></div>

<p>We can also control the delimiter to make piping values into other command-line tools
easier.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>cat test.json <span class="p">|</span> json-inspect ext -d <span class="s1">&#39;|&#39;</span> <span class="s2">&quot;[].*.user.demographic.regions.[].*&quot;</span>
Louisville<span class="p">|</span>Kentucky<span class="p">|</span>US<span class="p">|</span>Highland Heights<span class="p">|</span>Kentucky<span class="p">|</span>US<span class="p">|</span>Wales<span class="p">|</span>UK</code></pre></div>

<h2 id="keys">Keys</h2>

<p>So far we’ve seen inspection tools around the values within JSON, but what if we want to
see what keys are available within the JSON document? We can easily pull all keys of a JSON
document out with</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>cat test.json <span class="p">|</span> json-inspect keys
facebook.user.demographic.regions.name
google.user.demographic.regions.name
twitter.user.demographic.regions.name</code></pre></div>

<p>Additionally, we can provide some options which will filter out nulls, empty objects,
empty primitives, and empty arrays as <code>-n</code>, <code>-o</code>, <code>-p</code>, and <code>-e</code> respectively. We could
introduce some new fields to our <code>"facebook"</code> object to test.</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
 <span class="nt">&quot;facebook&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="nt">&quot;demographic&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="nt">&quot;regions&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;US&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Kentucky&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Louisville&quot;</span><span class="p">}</span> <span class="p">]</span>
     <span class="p">},</span>
     <span class="nt">&quot;null&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
     <span class="nt">&quot;empty_object&quot;</span><span class="p">:</span> <span class="p">{},</span>
     <span class="nt">&quot;empty_array&quot;</span><span class="p">:</span> <span class="p">[],</span>
     <span class="nt">&quot;empty_primitives&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="nt">&quot;string&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
       <span class="nt">&quot;int&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
       <span class="nt">&quot;float&quot;</span><span class="p">:</span> <span class="mf">0.0</span>
     <span class="p">}</span>
   <span class="p">}</span>
 <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Okay, so if you just ran the same command we used earlier, you would see all of these new
keys. But we can easily filter some or all of them out with some options. To get back to
our original set</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>cat test.json <span class="p">|</span> json-inspect keys -nope
facebook.user.demographic.regions.name
google.user.demographic.regions.name
twitter.user.demographic.regions.name</code></pre></div>

<h2 id="the-source">The Source</h2>

<p>This is up on my GitHub under the <a href="https://github.com/JohnMurray/json-inspect">json-inspect</a> project where you can find more
information and documentation. I plan to contribute further to this project as I have
need, but if you have ideas for useful features and want to contribute, feel free to
open PRs.</p>



        <div class="footer-navigation">
            
                <span class="previous"><a href="/log/2016/06/18/Dont-do-Open-Source.html">
                    &laquo;Don't Do Open Source
                </a></span>
            
            
                <span class="next"><a href="/log/2016/08/08/Jekyll-on-Heroku.html">
                    Deploying Jekyll to Heroku&raquo;
                </a></span>
            
        </div>

        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Footer Advertisement -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-8460014050417630"
             data-ad-slot="9924998708"
             data-ad-format="auto"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

    </article>

</div>

      </div>
    </div>


    <!-- Google Analytics -->
    <script type="application/javascript">
      function downloadGoogleAnalytics() {
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-11511983-4']);
        _gaq.push(['_trackPageview']);
        (function() {
          var ga = document.createElement('script'); 
          ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(ga, s);
        })();
      }
			if (window.addEventListener) window.addEventListener("load", downloadGoogleAnalytics, false);
			else if (window.attachEvent) window.attachEvent("onload", downloadGoogleAnalytics);
			else                         window.onload = downloadGoogleAnalytics;
    </script>
  </body>

</html>
