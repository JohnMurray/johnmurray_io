<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Getting Rust'y</title>
  <meta name="description" content="Have you heard of [Rust][1] (I’m not talking about iron oxide)? It’s a newsystems language being baked up by the [Mozilla Foundation][2]. Currentlyit is very...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.johnmurray.io/2012/09/26/Getting-Rusty.html">
  <link rel="alternate" type="application/rss+xml" title="John Murray" href="http://www.johnmurray.io/feed.xml" />
</head>


  <body>

    <header class="masthead">
  <div class="masthead-inner">
    <a href="/"><h1>murray</h2></a>
    <p class="sub">
      <a href="http://github.com/johnmurray">github</a>
      |
      <a href="http://twitter.com/johnmurray_io">twitter</a>
      |
      <a href="http://linkedin.com/pub/john-murray/22/a86/80a/en">linkedin</a>
    </p>
    <p class="sub">&copy; 2015. All Rights Reserved</p>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Getting Rust'y</h1>
    <p class="post-meta">Sep 26, 2012</p>
  </header>

  <article class="post-content">
    <p>Have you heard of <a href="http://rust-lang.org">Rust</a> (I’m not talking about iron oxide)? It’s a new
systems language being baked up by the <a href="http://www.mozilla.org/foundation">Mozilla Foundation</a>. Currently
it is very new and unstable (in the sense that it will change a LOT by the
time is reaches version 1). It looks very interesting and is well worth a look.</p>

<p>From my VERY limited knowledge of the language, it looks like <a href="http://en.wikipedia.org/wiki/C_(programming_language)">C</a>, <a href="http://golang.org">Go</a>,
and <a href="http://ruby-lang.org">Ruby</a> had a child. However, I’m sure my opinion of this will change
greatly as I learn more about the language. All I can really say for sure is
that it looks like it’s going to be a great/fun language to learn. How could
it not with a feature list consisting of:</p>

<ul>
  <li>pre-compiled (C/C++ compatible)</li>
  <li>static typing, with type inference</li>
  <li>simple concurrency model</li>
  <li>lambdas everywhere (the way it should be)</li>
  <li>immutable by default</li>
  <li>move semantics (<a href="http://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me">good explanation here</a>)</li>
</ul>

<p><br />
<br /></p>

<h3 id="compiling">Compiling</h3>
<p>Okay, if we’re going to play around with the language then we’ll at least need
to compile it and get it up and running. For me, I had just setup a new Fedora
17 instance (no updates at this point) and to compile only required that I do:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="lineno">1</span> <span class="c"># get all of the necessary tools to build</span>
<span class="lineno">2</span> sudo yum install gcc-c++ llvm llvm-devel perl wget
<span class="lineno">3</span>  
<span class="lineno">4</span> <span class="c"># following rust-lang.org&#39;s instructions</span>
<span class="lineno">5</span> wget http://dl.rust-lang.org/dist/rust-0.3.tar.gz
<span class="lineno">6</span> tar -xzf rust-0.3.tar.gz
<span class="lineno">7</span> <span class="nb">cd </span>rust-0.3
<span class="lineno">8</span> ./configure
<span class="lineno">9</span> make -j <span class="m">4</span> <span class="o">&amp;&amp;</span> make install</code></pre></div>

<p>Do note that I use the <code>-j</code> option for <code>make</code> to speed things up on my
computer. I’d recommend to change the value of <code>-j</code> to however many cores your
computer has available. You might also need to run <code>make install</code> as sudo
if you do not have the necessary permissions. </p>

<p><br />
<br /></p>

<h3 id="hello-rust">Hello Rust</h3>
<p>As is tradition, you have to force your newly compiled interpreter/compiler
to introduce itself to the world. And, in Rust, it’s just about as boring as it
is in any other language:</p>

<div class="highlight"><pre><code class="language-rust" data-lang="rust"><span class="lineno">1</span> <span class="k">fn</span> <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="o">:</span> <span class="o">~</span><span class="p">[</span><span class="kt">str</span><span class="p">])</span> <span class="p">{</span>
<span class="lineno">2</span>     <span class="n">io</span><span class="o">::</span><span class="nb">println</span><span class="p">(</span><span class="s">&quot;hello world from &#39;&quot;</span> <span class="o">+</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot;&#39;!&quot;</span><span class="p">);</span>
<span class="lineno">3</span> <span class="p">}</span></code></pre></div>

<p>A slightly more exciting example (shamelessly stolen from rust-lang.org’s
<a href="http://dl.rust-lang.org/doc/0.3/tutorial.html#first-impressions">tutorial</a>), a parallel game of rock-paper-scissors:</p>

<div class="highlight"><pre><code class="language-rust" data-lang="rust"><span class="lineno"> 1</span> <span class="kn">use</span> <span class="n">std</span><span class="p">;</span>
<span class="lineno"> 2</span>  
<span class="lineno"> 3</span> <span class="n">import</span> <span class="n">comm</span><span class="o">::</span><span class="p">{</span><span class="n">listen</span><span class="p">,</span> <span class="n">methods</span><span class="p">};</span>
<span class="lineno"> 4</span> <span class="n">import</span> <span class="n">task</span><span class="o">::</span><span class="nb">spawn</span><span class="p">;</span>
<span class="lineno"> 5</span> <span class="n">import</span> <span class="n">iter</span><span class="o">::</span><span class="n">repeat</span><span class="p">;</span>
<span class="lineno"> 6</span> <span class="n">import</span> <span class="n">rand</span><span class="o">::</span><span class="p">{</span><span class="n">seeded_rng</span><span class="p">,</span> <span class="n">seed</span><span class="p">};</span>
<span class="lineno"> 7</span> <span class="n">import</span> <span class="kt">uint</span><span class="o">::</span><span class="nb">range</span><span class="p">;</span>
<span class="lineno"> 8</span> <span class="n">import</span> <span class="n">io</span><span class="o">::</span><span class="nb">println</span><span class="p">;</span>
<span class="lineno"> 9</span>  
<span class="lineno">10</span> <span class="k">fn</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
<span class="lineno">11</span>     <span class="c1">// Open a channel to receive game results</span>
<span class="lineno">12</span>     <span class="k">do</span> <span class="n">listen</span> <span class="o">|</span><span class="n">result_from_game</span><span class="o">|</span> <span class="p">{</span>
<span class="lineno">13</span>  
<span class="lineno">14</span>         <span class="kd">let</span> <span class="n">times</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="lineno">15</span>         <span class="kd">let</span> <span class="n">player1</span> <span class="o">=</span> <span class="s">&quot;graydon&quot;</span><span class="p">;</span>
<span class="lineno">16</span>         <span class="kd">let</span> <span class="n">player2</span> <span class="o">=</span> <span class="s">&quot;patrick&quot;</span><span class="p">;</span>
<span class="lineno">17</span>  
<span class="lineno">18</span>         <span class="k">for</span> <span class="n">repeat</span><span class="p">(</span><span class="n">times</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">19</span>             <span class="c1">// Start another task to play the game</span>
<span class="lineno">20</span>             <span class="k">do</span> <span class="nb">spawn</span> <span class="o">|</span><span class="n">copy</span> <span class="n">player1</span><span class="p">,</span> <span class="n">copy</span> <span class="n">player2</span><span class="o">|</span> <span class="p">{</span>
<span class="lineno">21</span>                 <span class="kd">let</span> <span class="n">outcome</span> <span class="o">=</span> <span class="n">play_game</span><span class="p">(</span><span class="n">player1</span><span class="p">,</span> <span class="n">player2</span><span class="p">);</span>
<span class="lineno">22</span>                 <span class="n">result_from_game</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">outcome</span><span class="p">);</span>
<span class="lineno">23</span>             <span class="p">}</span>
<span class="lineno">24</span>         <span class="p">}</span>
<span class="lineno">25</span>  
<span class="lineno">26</span>         <span class="c1">// Report the results as the games complete</span>
<span class="lineno">27</span>         <span class="k">for</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">times</span><span class="p">)</span> <span class="o">|</span><span class="n">round</span><span class="o">|</span> <span class="p">{</span>
<span class="lineno">28</span>             <span class="kd">let</span> <span class="n">winner</span> <span class="o">=</span> <span class="n">result_from_game</span><span class="p">.</span><span class="n">recv</span><span class="p">();</span>
<span class="lineno">29</span>             <span class="nb">println</span><span class="p">(</span><span class="err">#</span><span class="n">fmt</span><span class="p">(</span><span class="s">&quot;%s wins round #%u&quot;</span><span class="p">,</span> <span class="n">winner</span><span class="p">,</span> <span class="n">round</span><span class="p">));</span>
<span class="lineno">30</span>         <span class="p">}</span>
<span class="lineno">31</span>     <span class="p">}</span>
<span class="lineno">32</span>  
<span class="lineno">33</span>     <span class="k">fn</span> <span class="n">play_game</span><span class="p">(</span><span class="n">player1</span><span class="o">:</span> <span class="kt">str</span><span class="p">,</span> <span class="n">player2</span><span class="o">:</span> <span class="kt">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">str</span> <span class="p">{</span>
<span class="lineno">34</span>  
<span class="lineno">35</span>         <span class="c1">// Our rock/paper/scissors types</span>
<span class="lineno">36</span>         <span class="k">enum</span> <span class="n">gesture</span> <span class="p">{</span>
<span class="lineno">37</span>             <span class="n">rock</span><span class="p">,</span> <span class="n">paper</span><span class="p">,</span> <span class="n">scissors</span>
<span class="lineno">38</span>         <span class="p">}</span>
<span class="lineno">39</span>  
<span class="lineno">40</span>         <span class="kd">let</span> <span class="n">rng</span> <span class="o">=</span> <span class="n">seeded_rng</span><span class="p">(</span><span class="n">seed</span><span class="p">());</span>
<span class="lineno">41</span>         <span class="c1">// A small inline function for picking an RPS gesture</span>
<span class="lineno">42</span>         <span class="kd">let</span> <span class="n">pick</span> <span class="o">=</span> <span class="o">||</span> <span class="p">(</span><span class="o">~</span><span class="p">[</span><span class="n">rock</span><span class="p">,</span> <span class="n">paper</span><span class="p">,</span> <span class="n">scissors</span><span class="p">])[</span><span class="n">rng</span><span class="p">.</span><span class="n">gen_uint</span><span class="p">()</span> <span class="o">%</span> <span class="mi">3</span><span class="p">];</span>
<span class="lineno">43</span>  
<span class="lineno">44</span>         <span class="c1">// Pick two gestures and decide the result</span>
<span class="lineno">45</span>         <span class="n">alt</span> <span class="p">(</span><span class="n">pick</span><span class="p">(),</span> <span class="n">pick</span><span class="p">())</span> <span class="p">{</span>
<span class="lineno">46</span>             <span class="p">(</span><span class="n">rock</span><span class="p">,</span> <span class="n">scissors</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">paper</span><span class="p">,</span> <span class="n">rock</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">scissors</span><span class="p">,</span> <span class="n">paper</span><span class="p">)</span> <span class="p">{</span> <span class="n">copy</span> <span class="n">player1</span> <span class="p">}</span>
<span class="lineno">47</span>             <span class="p">(</span><span class="n">scissors</span><span class="p">,</span> <span class="n">rock</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">rock</span><span class="p">,</span> <span class="n">paper</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">paper</span><span class="p">,</span> <span class="n">scissors</span><span class="p">)</span> <span class="p">{</span> <span class="n">copy</span> <span class="n">player2</span> <span class="p">}</span>
<span class="lineno">48</span>             <span class="n">_</span> <span class="p">{</span> <span class="s">&quot;tie&quot;</span> <span class="p">}</span>
<span class="lineno">49</span>         <span class="p">}</span>
<span class="lineno">50</span>     <span class="p">}</span>
<span class="lineno">51</span> <span class="p">}</span></code></pre></div>

<h3 id="i-want-more">I Want More!</h3>
<p>If you’re like me, then you think that Rust could really turn out to be something
fun and awesome (I really recommend heading on over to rust-lang.org to learn
something more substantial)! But, I’m not here to give a thorough walk-through
of the language. I’m more or less just giving a shout-out to what could really
be a very interesting systems-programming language.</p>


  </article>

</div>

      </div>
    </div>


    <!-- Google Analytics -->
    <script type="application/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-11511983-4']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); 
        ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>

</html>
